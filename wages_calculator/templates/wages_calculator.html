{% extends "std_template.html" %}


{% block standard_title %}WAGES CALCULATOR{% endblock %}

    {% block standard_content%}
        <div class="row">
            <div class="col s12 l5 ">
                <form action="" method="post">

                    <!-- date -->
                    <div class="row">
                        <div class="input-field col s12">
                            <!-- <i class="fas fa-calendar prefix light-blue-text text-darken-4"></i> -->
                            <input id="date" name="search_date"  type="text" class="datepicker validate" required>
                            <label for="date">Date:</label>
                        </div>
                    </div>

                    <!-- driver -->
                    <div class="row">
                        <div class="input-field col s12">
                            <!-- <i class="fas fa-calendar prefix light-blue-text text-darken-4"></i> -->  
                            <select name="search_driver_id" id="driver_id" class="validate" required>
                                <option value="" disabled selected>Choose driver</option>
                                {% for driver in drivers %}
                                    <option value="{{ driver.id }}" >{{ driver.name() }}</option>
                                {% endfor %}   
                            </select>
                            <label for="driver_id">Select Driver:</label>
                        </div>
                    </div>

                    <!-- buttons -->
                    <div class="row">
                        <div class="input-field col s12">
                            <button type="submit" class="btn green accent-4 submit">Search </button>
                            <button href="{{ url_for('wages_calculator')}}" class="btn grey" formnovalidate>Reset</button>
                        </div>   
                    </div>
                </form>
            </div>
            <div class="col s12 l5">
                {% if results is defined %}

                    <table class="centered">
                        <thead>
                          <tr>
                              <th>Date</th>
                              <th>Earned</th>
                              <th>Wage</th>
                              <th>Overnight</th>
                          </tr>
                        </thead>
                
                        <tbody>
                            {% for result in results %}    
                            <tr>
                                <td>{{ result.date }}</td>
                                <td>{{ result.earned }}</td>
                                <td>{{ result.driver.bonus_percentage * result.earned }}</td>
                                <td>{{ "y" if result.overnight == True else "n" }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table> 
                    
                    <table class="centered">
                        <thead>
                            <tr>
                                <th>Total earned</th>
                                <th>Expenses</th>
                                <th>Bonus</th>
                                <th>Base wage</th>
                                <th>Wages total</th>
                            </tr>
                            <tbody>    
                                <tr>
                                    <td>{{ total_earned }}</td>
                                    <td>{{ total_overnight }}</td>
                                    <td>{{ bonus_wage }}</td>
                                    <td>{{ base_wage }}</td>
                                    <td>{{ total_wages }}</td>
                                </tr>
                            </tbody>
                        </table> 
                                
                    
                {% endif %}
            </div>
        </div>
    {% endblock %}
